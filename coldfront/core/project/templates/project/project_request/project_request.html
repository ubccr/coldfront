{% extends "common/base.html" %}
{% load crispy_forms_tags %}
{% load static %}


{% block title %}
Project Request
{% endblock %}


{% block content %}

<h1>Create a Project</h1>
<hr>

<p>Request to create a new Savio or Vector project, and view pending requests.</p>

<hr>
<div class="row">
  <div class="col-lg-6 mt-2">
    <h2>Savio</h2>
    {% if savio_requests %}
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">PI</th>
            <th scope="col">Status</th>
          </tr>
        </thead>
        <tbody>
          {% for savio_request in savio_requests %}
            <tr>
              <td>{{ savio_request.project.name }}</td>
              {% with pi=savio_request.pi %}
                <td>{{ pi.first_name }} {{ pi.last_name }} ({{ pi.username }})</td>
              {% endwith %}
              {% with status=savio_request.status.name %}
                <td>
                  {% if status == "Approved" %}
                    <span class="badge badge-warning">{{ status }}</span>
                  {% elif status == "Denied" %}
                    <span class="badge badge-warning">{{ status }}</span>
                  {% elif status == "Pending" %}
                    <span class="badge badge-warning">{{ status }}</span>
                  {% endif %}
                </td>
              {% endwith %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <div class="alert alert-info" role="alert">
        <i class="fa fa-info-circle" aria-hidden="true"></i>
        No pending requests.
      </div>
    {% endif %}
  </div>
  <div class="col-lg-6 mt-2">
    <h2>Vector</h2>
    {% if vector_requests %}
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">PI</th>
            <th scope="col">Status</th>
          </tr>
        </thead>
        <tbody>
          {% for vector_request in vector_requests %}
            <tr>
              <td>{{ vector_request.project.name }}</td>
              {% with pi=vector_request.pi %}
                <td>{{ pi.first_name }} {{ pi.last_name }} ({{ pi.username }})</td>
              {% endwith %}
              {% with status=vector_request.status.name %}
                <td>
                  {% if status == "Approved" %}
                    <span class="badge badge-warning">{{ status }}</span>
                  {% elif status == "Denied" %}
                    <span class="badge badge-warning">{{ status }}</span>
                  {% elif status == "Pending" %}
                    <span class="badge badge-warning">{{ status }}</span>
                  {% endif %}
                </td>
              {% endwith %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <div class="alert alert-info" role="alert">
        <i class="fa fa-info-circle" aria-hidden="true"></i>
        No pending requests.
      </div>
    {% endif %}
  </div>
</div>

<div class="row">
  <div class="col-lg-6 mt-2">
    <a href="{% url 'savio-project-request' %}" class="btn btn-primary">
      Create
    </a>
  </div>
  <div class="col-lg-6 mt-2">
    <a href="{% url 'vector-project-request' %}" class="btn btn-primary">
      Create
    </a>
  </div>
</div>

{% endblock %}
