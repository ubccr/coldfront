WSGISocketPrefix /var/run/wsgi
LoadModule auth_basic_module modules/mod_auth_basic.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule ssl_module modules/mod_ssl.so
LoadModule headers_module modules/mod_headers.so

WSGIPassAuthorization On

<VirtualHost 0.0.0.0:80>

    ServerName {{ hostname }}
    ServerAlias {{ hostname }}

    Alias /static/mybrc-rest/ {{ git_prefix }}/{{ reponame }}/{{ djangoprojname2 }}/rest/rest/static/

    <Directory {{ git_prefix }}/{{ reponame }}/{{ djangoprojname2 }}/rest/rest/static>
        Require all granted
    </Directory>

    WSGIDaemonProcess brc_rest_api python-path={{ git_prefix }}/{{ reponame }}/{{ djangoprojname2 }}/rest/:{{ git_prefix }}/{{ reponame }}/{{ djangoprojname1 }} processes=2 threads=15 display-name=brc_rest_api
    WSGIProcessGroup brc_rest_api

    WSGIScriptAlias /mybrc-rest {{ git_prefix }}/{{ reponame }}/{{ djangoprojname2 }}/rest/rest/wsgi.py process-group=brc_rest_api

    <Directory {{ git_prefix }}/{{ reponame }}/{{ djangoprojname2 }}/rest/>
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>

    Alias /static/ {{ git_prefix }}/{{ reponame }}/{{ djangoprojname1 }}/scgup/static/

    <Directory {{ git_prefix }}/{{ reponame }}/{{ djangoprojname1 }}/scgup/static>
        Require all granted
    </Directory>

    WSGIDaemonProcess brc_portal processes=2 threads=15 display-name=brc_portal
    WSGIProcessGroup brc_portal

    WSGIScriptAlias / {{ git_prefix }}/{{ reponame }}/{{ djangoprojname1 }}/scgup/wsgi.py process-group=brc_portal

    <Directory {{ git_prefix }}/{{ reponame }}/{{ djangoprojname1 }}/scgup/>
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>

    ErrorLog /var/log/httpd/brc.error.log
    CustomLog /var/log/httpd/brc.custom.log combined

</VirtualHost>

